<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>–û–Ω–±–æ—Ä–¥–æ—Å –≤–∞–µ–±—Å</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --bg:#0f1113; --card:#000; --border:#2b2f36; --muted:rgba(255,255,255,.2);
    --text:#fff; --accent1:#7c3aed; --accent2:#ec4899; --green:#22c55e;
  }
  *{box-sizing:border-box}
  html, body{margin:0;padding:0;height:100%;overflow:hidden}
  body{background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
       display:flex;justify-content:center;align-items:center}
  .app{display:flex;gap:20px;flex-wrap:wrap;align-items:center;justify-content:center;height:100vh;padding:20px}
  .phone{position:relative;width:393px;height:min(852px, calc(100vh - 40px));border-radius:55px;overflow:hidden;
         background:linear-gradient(145deg, #1d1d1f, #0a0a0b);
         box-shadow:0 0 0 1px #2c2c2e, 
                    0 0 0 3px #1d1d1f, 
                    0 0 0 4px #424245,
                    0 30px 80px rgba(0,0,0,0.8), 
                    0 8px 25px rgba(0,0,0,0.4),
                    inset 0 1px 0 rgba(255,255,255,0.02);
         border:0.5px solid #424245;
         position:relative}
  
  .phone::before {
    content: '';
    position: absolute;
    top: 8px;
    left: 50%;
    transform: translateX(-50%);
    width: 126px;
    height: 37px;
    background: #000;
    border-radius: 19px;
    z-index: 100;
    box-shadow: inset 0 2px 6px rgba(0,0,0,0.9),
                0 1px 2px rgba(0,0,0,0.5);
  }
  
  .dynamic-island-status {
    position: absolute;
    top: 8px;
    left: 50%;
    transform: translateX(-50%);
    width: 126px;
    height: 37px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 12px;
    font-size: 11px;
    font-weight: 600;
    color: #fff;
    z-index: 101;
    pointer-events: none;
  }
  
  /* Status Bar Information */
  .status-left,
  .status-right {
    position: absolute;
    top: 16px;
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 14px;
    font-weight: 600;
    color: #fff;
    z-index: 100;
  }
  
  .status-left {
    left: 45px;
  }
  
  .status-right {
    right: 45px;
  }
  
  .dnd-icon {
    font-size: 12px;
    opacity: 0.8;
  }
  
  .signal-bars {
    display: flex;
    align-items: flex-end;
    gap: 2px;
    margin-right: 6px;
  }
  
  .signal-bar {
    width: 3px;
    background: #fff;
    border-radius: 1px;
    transition: all 0.3s ease;
  }
  
  .signal-bar:nth-child(1) { height: 3px; }
  .signal-bar:nth-child(2) { height: 5px; }
  .signal-bar:nth-child(3) { height: 7px; }
  .signal-bar:nth-child(4) { height: 9px; }
  
  .signal-bar.weak {
    opacity: 0.3;
  }
  
  .signal-dot.weak {
    opacity: 0.3;
  }
  
  .battery-status {
    display: flex;
    align-items: center;
    gap: 3px;
  }
  
  .battery-percentage {
    font-size: 14px;
  }
  
  .battery-icon-status {
    width: 20px;
    height: 10px;
    border: 1px solid #fff;
    border-radius: 2px;
    position: relative;
    background: transparent;
  }
  
  .battery-icon-status::before {
    content: '';
    position: absolute;
    right: -3px;
    top: 2px;
    width: 2px;
    height: 6px;
    background: #fff;
    border-radius: 0 1px 1px 0;
  }
  
  .battery-fill-status {
    position: absolute;
    left: 1px;
    top: 1px;
    height: 8px;
    border-radius: 1px;
    transition: all 0.3s ease;
  }
  
  .bluetooth-icon {
    font-size: 11px;
    margin-left: 1px;
  }
  
  .phone::after {
    content: '';
    position: absolute;
    top: 18px;
    left: 50%;
    transform: translateX(-50%);
    width: 44px;
    height: 3px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
    border-radius: 1.5px;
    z-index: 102;
  }
  
  .battery {
    display: flex;
    align-items: center;
    gap: 1px;
  }
  
  .battery-icon {
    width: 14px;
    height: 6px;
    border: 0.5px solid rgba(255,255,255,0.8);
    border-radius: 1px;
    position: relative;
    background: rgba(255,255,255,0.1);
  }
  
  .battery-icon::after {
    content: '';
    position: absolute;
    right: -1px;
    top: 1.5px;
    width: 0.5px;
    height: 3px;
    background: rgba(255,255,255,0.8);
    border-radius: 0 0.5px 0.5px 0;
  }
  
  .battery-fill {
    height: 100%;
    background: linear-gradient(90deg, #22c55e, #16a34a);
    border-radius: 0.5px;
    transition: width 0.3s ease;
  }
  
  .signal-bars {
    display: flex;
    align-items: flex-end;
    gap: 0.5px;
  }
  
  .signal-bar {
    width: 1.5px;
    background: rgba(255,255,255,0.9);
    border-radius: 0.5px;
  }
  
  .signal-bar:nth-child(1) { height: 2px; }
  .signal-bar:nth-child(2) { height: 3px; }
  .signal-bar:nth-child(3) { height: 4px; }
  .signal-bar:nth-child(4) { height: 5px; }
  
  /* iPhone Physical Buttons */
  .phone-button-volume,
  .phone-button-power {
    position: absolute;
    background: linear-gradient(135deg, #2c2c2e, #1c1c1e);
    border-radius: 2px;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.1),
                0 1px 3px rgba(0,0,0,0.3);
    z-index: 1;
  }
  
  /* Volume buttons */
  .phone-button-volume {
    left: -3px;
    top: 120px;
    width: 3px;
    height: 80px;
  }
  
  /* Power button */
  .phone-button-power {
    right: -3px;
    top: 160px;
    width: 3px;
    height: 60px;
  }
  
  .video{position:absolute;inset:4px;object-fit:cover;width:calc(100% - 8px);height:calc(100% - 8px);
         transition:opacity 0.6s ease;border-radius:51px;overflow:hidden}
  .video video{width:100%;height:100%;object-fit:cover}
  .header{position:absolute;top:min(65px, 8%);left:14px;right:14px;display:flex;justify-content:space-between;z-index:500;font-size:12px;align-items:center}
  .brand{display:flex;gap:8px;align-items:center}
  .brand .tag{padding:4px 8px;border:1px solid var(--muted);border-radius:999px;background:rgba(255,255,255,.06);font-weight:700}
  .btn{padding:6px 10px;border-radius:12px;border:1px solid var(--muted);background:rgba(255,255,255,.08);cursor:pointer;z-index:500;position:relative;
       transition:all 0.2s ease;user-select:none}
  .btn:hover{background:rgba(255,255,255,.12);border-color:rgba(255,255,255,.3);transform:translateY(-1px);
             box-shadow:0 4px 12px rgba(0,0,0,.2)}
  .btn:active{transform:scale(.98) translateY(0);box-shadow:0 2px 6px rgba(0,0,0,.15)}
  .actions{position:absolute;right:14px;bottom:min(140px, 20%);display:flex;flex-direction:column;gap:10px;z-index:50}
  .circle-btn{width:48px;height:48px;border-radius:50%;background:rgba(255,255,255,.08);border:1px solid var(--muted);
              display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;transition:all .2s ease;user-select:none}
  .circle-btn:hover{background:rgba(255,255,255,.15);border-color:rgba(255,255,255,.25);transform:translateY(-2px) scale(1.05);
                    box-shadow:0 6px 20px rgba(0,0,0,.25)}
  .circle-btn:active{transform:scale(.96) translateY(0);box-shadow:0 2px 8px rgba(0,0,0,.2)}

  .navbar{position:absolute;bottom:min(20px, 3%);left:14px;right:14px;display:flex;justify-content:center;z-index:500}
  .navbar .btn{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.2);
               backdrop-filter:blur(20px);box-shadow:0 4px 20px rgba(0,0,0,.3);
               transition:all 0.2s ease}
  .navbar .btn:hover{background:rgba(255,255,255,.18);border-color:rgba(255,255,255,.35);
                     transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,.4)}
  .navbar .btn.success{background:rgba(34,197,94,.2);border-color:rgba(34,197,94,.4);color:#22c55e}
  .navbar .btn.success:hover{background:rgba(34,197,94,.25);border-color:rgba(34,197,94,.5);
                             transform:translateY(-2px);box-shadow:0 8px 25px rgba(34,197,94,.3)}

  .side{display:flex;flex-direction:column;gap:16px;position:relative}
  .next-btn{width:210px;height:56px;border-radius:16px;
            background:linear-gradient(135deg, #fde047, #facc15, #eab308);
            border:1px solid rgba(250, 204, 21, 0.3);
            box-shadow:0 8px 24px rgba(234, 179, 8, 0.4), 
                       0 0 0 1px rgba(255, 255, 255, 0.1),
                       inset 0 1px 0 rgba(255, 255, 255, 0.2);
            cursor:pointer;display:flex;align-items:center;justify-content:space-between;
            padding:0 20px;font-size:15px;font-weight:700;color:#713f12;
            transition:all 0.2s ease;position:relative;overflow:hidden;user-select:none}
  .next-btn:hover{transform:translateY(-2px);
                  box-shadow:0 12px 32px rgba(234, 179, 8, 0.5), 
                             0 0 0 1px rgba(255, 255, 255, 0.15),
                             inset 0 1px 0 rgba(255, 255, 255, 0.3)}
  .next-btn:active{transform:translateY(0);
                   box-shadow:0 4px 16px rgba(234, 179, 8, 0.3), 
                              0 0 0 1px rgba(255, 255, 255, 0.1),
                              inset 0 1px 0 rgba(255, 255, 255, 0.2)}
  .next-btn::before{content:'';position:absolute;inset:0;
                   background:linear-gradient(45deg,transparent,rgba(255,255,255,.15),transparent);
                   transform:translateX(-100%);transition:transform 0.6s ease;z-index:0}
  .next-btn:hover::before{transform:translateX(100%)}
  .next-btn .text{display:flex;flex-direction:column;align-items:flex-start}
  .next-btn .title{font-size:15px;font-weight:700;line-height:1}
  .next-btn small{font-size:12px;opacity:.8;font-weight:600;margin-top:2px}
  .next-btn .icon{font-size:20px;transform:translateX(0);transition:transform 0.2s ease;
                  filter:drop-shadow(0 1px 2px rgba(0,0,0,0.1))}
  .next-btn:hover .icon{transform:translateX(4px)}
  .panel{padding:12px;border-radius:12px;background:rgba(255,255,255,.06);border:1px solid var(--muted);font-size:12px;min-width:210px}
  .panel #resetBtn:hover{background:rgba(239,68,68,.15);border-color:rgba(239,68,68,.3);color:#fca5a5;
                         transform:translateY(-1px);box-shadow:0 4px 12px rgba(239,68,68,.2)}
  .panel-header{cursor:pointer;transition:all 0.2s ease;user-select:none}
  .panel-header:hover{color:var(--accent2);transform:scale(1.02)}
  .panel-header:active{transform:scale(0.98)}
  .rules{margin-top:8px;line-height:1.55}
  .rules .done{color:#a7f3d0}

  .toast{position:absolute;top:-80px;left:50%;transform:translateX(-50%);padding:12px 16px;border-radius:16px;
         min-width:260px;max-width:340px;background:rgba(5,6,8,.92);border:1px solid rgba(255,255,255,.12);
         text-align:left;z-index:90;opacity:0;transition:all .35s cubic-bezier(.2,.8,.2,1)}
  .toast.show{top:120px;opacity:1}
  .toast.final{
    background:linear-gradient(135deg, rgba(124,58,237,0.95), rgba(236,72,153,0.95));
    border:1px solid rgba(255,255,255,.3);
    box-shadow:0 0 40px rgba(124,58,237,.6), 0 0 80px rgba(236,72,153,.4), 0 0 120px rgba(255,255,255,.2);
    animation:finalToastGlow 3s ease-in-out infinite alternate;
  }
  .toast .title{font-weight:800;margin-bottom:4px}
  .toast .hint{opacity:.9;font-size:13px}
  .progress-wrap{margin-top:8px}
  .progress-top{display:flex;justify-content:space-between;font-size:12px;opacity:.85}
  .progress-bar{margin-top:4px;height:8px;background:rgba(255,255,255,.18);border-radius:999px;overflow:hidden}
  .progress-fill{height:100%;width:0%;background:linear-gradient(90deg,#34d399,#22c55e);transition:width .35s ease}

  .confetti{position:absolute;width:8px;height:8px;background:var(--c);top:0;left:0;opacity:.9}
  
  /* Easter Egg Button */
  .easter-egg-btn {
    position: absolute;
    right: 12px;
    bottom: 8px;
    width: 40px;
    height: 32px;
    background: transparent;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    opacity: 0;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    color: transparent;
    z-index: 10;
  }
  
  .easter-egg-btn:hover {
    opacity: 0.1;
    background: rgba(255,255,255,0.05);
    transform: scale(1.05);
  }
  
  .easter-egg-btn:active {
    transform: scale(0.95);
    opacity: 0.2;
  }
  
  /* Telegram Notification Styles */
  .telegram-notification {
    position: absolute;
    top: 120px;
    left: 14px;
    right: 14px;
    background: rgba(0, 0, 0, 0.95);
    border-radius: 16px;
    padding: 16px;
    z-index: 200;
    transform: translateY(-100px);
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .telegram-notification.show {
    transform: translateY(0);
    opacity: 1;
  }
  
  .notification-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }
  
  .contact-info {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  
  .avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea, #764ba2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
  }
  
  .contact-details {
    display: flex;
    flex-direction: column;
  }
  
  .contact-name {
    font-weight: 600;
    color: #fff;
    font-size: 15px;
  }
  
  .contact-status {
    font-size: 12px;
    color: #00d4ff;
    opacity: 0.9;
  }
  
  .notification-time {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.6);
  }
  
  .notification-message {
    background: rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    padding: 12px 16px;
    color: #fff;
    font-size: 14px;
    line-height: 1.4;
    border-left: 3px solid #00d4ff;
  }
  
  /* ULTIMATE CELEBRATION ANIMATIONS - THE MOST BEAUTIFUL EVER CREATED */
  .celebration {
    position: absolute;
    top: 120px;
    left: 50%;
    transform: translateX(-50%);
    pointer-events: none;
    z-index: 85;
    width: 350px;
    height: 600px;
    overflow: hidden;
  }
  
  .celebration::before {
    content: '';
    position: absolute;
    inset: -50px;
    background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
    animation: celebrationGlow 4s ease-out forwards;
  }
  
  .star-burst {
    position: absolute;
    width: 30px;
    height: 30px;
    background: linear-gradient(45deg, #ffd700, #ffed4e, #fff);
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    animation: starBurst 1.8s ease-out forwards;
    box-shadow: 0 0 30px #ffd700, 0 0 60px rgba(255, 215, 0, 0.5);
    filter: drop-shadow(0 0 10px #fff);
  }
  
  .star-mega {
    position: absolute;
    width: 60px;
    height: 60px;
    background: linear-gradient(45deg, #ffd700, #ffed4e, #fff, #ffd700);
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    animation: starMegaBurst 2.5s ease-out forwards;
    box-shadow: 0 0 50px #ffd700, 0 0 100px rgba(255, 215, 0, 0.8), 0 0 150px rgba(255, 255, 255, 0.3);
    filter: drop-shadow(0 0 20px #fff) brightness(1.2);
  }
  
  .star-ultra {
    position: absolute;
    width: 80px;
    height: 80px;
    background: conic-gradient(from 0deg, #ffd700, #ff8c00, #fff, #ffd700);
    clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
    animation: starUltraBurst 3s ease-out forwards;
    box-shadow: 0 0 80px #ffd700, 0 0 160px rgba(255, 140, 0, 0.8), 0 0 240px rgba(255, 255, 255, 0.4);
    filter: drop-shadow(0 0 30px #fff) brightness(1.5) saturate(1.2);
  }
  
  .gem {
    position: absolute;
    width: 25px;
    height: 25px;
    background: linear-gradient(45deg, #00d4ff, #00ff88, #fff);
    transform: rotate(45deg);
    animation: gemFloat 2s ease-out forwards;
    box-shadow: 0 0 25px rgba(0, 212, 255, 0.8), 0 0 50px rgba(0, 255, 136, 0.4);
    filter: drop-shadow(0 0 8px #fff) brightness(1.1);
  }
  
  .gem-large {
    position: absolute;
    width: 45px;
    height: 45px;
    background: conic-gradient(from 0deg, #ff6b6b, #ffd93d, #00d4ff, #ff6b6b);
    transform: rotate(45deg);
    animation: gemLargeFloat 2.8s ease-out forwards;
    box-shadow: 0 0 40px rgba(255, 107, 107, 0.9), 0 0 80px rgba(255, 217, 61, 0.6);
    filter: drop-shadow(0 0 15px #fff) brightness(1.3) saturate(1.1);
  }
  
  .gem-crystal {
    position: absolute;
    width: 35px;
    height: 35px;
    background: linear-gradient(45deg, transparent, #fff, transparent, #fff);
    transform: rotate(45deg);
    animation: gemCrystalFloat 2.5s ease-out forwards;
    box-shadow: 0 0 30px rgba(255, 255, 255, 0.8), 0 0 60px rgba(255, 255, 255, 0.4);
    filter: drop-shadow(0 0 12px #fff) brightness(1.4);
    opacity: 0.9;
  }
  
  .heart {
    position: absolute;
    width: 20px;
    height: 20px;
    background: linear-gradient(45deg, #ff6b6b, #ff1744, #fff);
    transform: rotate(45deg);
    animation: heartPop 1.8s ease-out forwards;
    box-shadow: 0 0 20px #ff6b6b, 0 0 40px rgba(255, 23, 68, 0.6);
    filter: drop-shadow(0 0 8px #fff) brightness(1.2);
  }
  
  .heart::before,
  .heart::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 20px;
    background: linear-gradient(45deg, #ff6b6b, #ff1744, #fff);
    border-radius: 50%;
  }
  
  .heart::before {
    left: -10px;
  }
  
  .heart::after {
    top: -10px;
  }
  
  .particle {
    position: absolute;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    animation: particleExplode 3s ease-out forwards;
    box-shadow: 0 0 15px currentColor;
    filter: brightness(1.3);
  }
  
  .sparkle {
    position: absolute;
    width: 18px;
    height: 18px;
    background: linear-gradient(45deg, #fff, #ffd700, #fff);
    clip-path: polygon(50% 0%, 60% 40%, 100% 50%, 60% 60%, 50% 100%, 40% 60%, 0% 50%, 40% 40%);
    animation: sparkleShine 2.5s ease-out forwards;
    box-shadow: 0 0 20px #fff, 0 0 40px rgba(255, 215, 0, 0.6);
    filter: drop-shadow(0 0 5px #fff) brightness(1.4);
  }
  
  .rainbow-burst {
    position: absolute;
    width: 80px;
    height: 80px;
    background: conic-gradient(from 0deg, #ff0080, #ff8c00, #40e0d0, #8a2be2, #ff0080);
    border-radius: 50%;
    animation: rainbowBurst 3.5s ease-out forwards;
    opacity: 0.9;
    box-shadow: 0 0 50px rgba(255, 0, 128, 0.5), 0 0 100px rgba(64, 224, 208, 0.3);
    filter: blur(1px) brightness(1.2);
  }
  
  .magic-circle {
    position: absolute;
    width: 120px;
    height: 120px;
    border: 4px solid transparent;
    border-radius: 50%;
    background: linear-gradient(45deg, transparent, transparent) padding-box,
                conic-gradient(from 0deg, #ffd700, #ff6b6b, #00d4ff, #8a2be2, #ffd700) border-box;
    animation: magicCircle 4s ease-out forwards;
    filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.6));
  }
  
  .plasma-orb {
    position: absolute;
    width: 100px;
    height: 100px;
    background: radial-gradient(circle, #ff6b6b 0%, #00d4ff 50%, #ffd700 100%);
    border-radius: 50%;
    animation: plasmaOrb 3.5s ease-out forwards;
    box-shadow: 0 0 60px rgba(255, 107, 107, 0.6), 0 0 120px rgba(0, 212, 255, 0.4);
    filter: blur(2px) brightness(1.3);
    opacity: 0.7;
  }
  
  .energy-wave {
    position: absolute;
    width: 200px;
    height: 200px;
    border: 3px solid transparent;
    border-radius: 50%;
    background: linear-gradient(45deg, transparent, transparent) padding-box,
                linear-gradient(45deg, rgba(255, 215, 0, 0.8), transparent, rgba(0, 212, 255, 0.8), transparent) border-box;
    animation: energyWave 4s ease-out forwards;
    opacity: 0.6;
  }
  
  .phoenix-feather {
    position: absolute;
    width: 40px;
    height: 8px;
    background: linear-gradient(90deg, #ff6b6b, #ff8c00, #ffd700);
    border-radius: 20px;
    animation: phoenixFeather 3s ease-out forwards;
    box-shadow: 0 0 20px rgba(255, 140, 0, 0.8);
    filter: drop-shadow(0 0 5px #fff);
  }
  
  .cosmic-dust {
    position: absolute;
    width: 6px;
    height: 6px;
    background: #fff;
    border-radius: 50%;
    animation: cosmicDust 4s ease-out forwards;
    box-shadow: 0 0 10px #fff;
  }
  
  @keyframes celebrationGlow {
    0% { opacity: 0; transform: scale(0); }
    50% { opacity: 1; transform: scale(1.5); }
    100% { opacity: 0; transform: scale(3); }
  }
  
  @keyframes starBurst {
    0% { transform: scale(0) rotate(0deg); opacity: 1; }
    20% { transform: scale(2.5) rotate(120deg); opacity: 1; }
    60% { transform: scale(1.8) rotate(240deg); opacity: 0.9; }
    100% { transform: scale(0.2) rotate(720deg) translateY(-400px); opacity: 0; }
  }
  
  @keyframes starMegaBurst {
    0% { transform: scale(0) rotate(0deg); opacity: 1; }
    15% { transform: scale(3.5) rotate(90deg); opacity: 1; }
    40% { transform: scale(2.5) rotate(270deg); opacity: 0.95; }
    100% { transform: scale(0.3) rotate(1080deg) translateY(-500px); opacity: 0; }
  }
  
  @keyframes starUltraBurst {
    0% { transform: scale(0) rotate(0deg); opacity: 1; }
    10% { transform: scale(4) rotate(60deg); opacity: 1; }
    30% { transform: scale(3) rotate(180deg); opacity: 0.98; }
    70% { transform: scale(2) rotate(360deg); opacity: 0.8; }
    100% { transform: scale(0.4) rotate(1440deg) translateY(-600px); opacity: 0; }
  }
  
  @keyframes gemFloat {
    0% { transform: rotate(45deg) scale(0) translateY(0); opacity: 1; }
    20% { transform: rotate(45deg) scale(2) translateY(-40px); opacity: 1; }
    50% { transform: rotate(45deg) scale(1.5) translateY(-100px); opacity: 0.9; }
    100% { transform: rotate(45deg) scale(0.3) translateY(-350px); opacity: 0; }
  }
  
  @keyframes gemLargeFloat {
    0% { transform: rotate(45deg) scale(0) translateY(0); opacity: 1; }
    15% { transform: rotate(45deg) scale(2.8) translateY(-30px); opacity: 1; }
    40% { transform: rotate(45deg) scale(2) translateY(-120px); opacity: 0.95; }
    100% { transform: rotate(45deg) scale(0.5) translateY(-450px); opacity: 0; }
  }
  
  @keyframes gemCrystalFloat {
    0% { transform: rotate(45deg) scale(0) translateY(0); opacity: 0.9; }
    25% { transform: rotate(45deg) scale(2.2) translateY(-35px); opacity: 1; }
    60% { transform: rotate(45deg) scale(1.7) translateY(-110px); opacity: 0.8; }
    100% { transform: rotate(45deg) scale(0.4) translateY(-400px); opacity: 0; }
  }
  
  @keyframes heartPop {
    0% { transform: rotate(45deg) scale(0); opacity: 1; }
    20% { transform: rotate(45deg) scale(2.5); opacity: 1; }
    40% { transform: rotate(45deg) scale(1.8); opacity: 0.95; }
    100% { transform: rotate(45deg) scale(0.3) translateY(-300px); opacity: 0; }
  }
  
  @keyframes particleExplode {
    0% { transform: scale(0) translate(0, 0); opacity: 1; }
    25% { transform: scale(2) translate(var(--dx), var(--dy)); opacity: 1; }
    60% { transform: scale(1.5) translate(calc(var(--dx) * 2), calc(var(--dy) * 2)); opacity: 0.8; }
    100% { transform: scale(0.2) translate(calc(var(--dx) * 4), calc(var(--dy) * 4)); opacity: 0; }
  }
  
  @keyframes sparkleShine {
    0% { transform: scale(0) rotate(0deg); opacity: 1; }
    30% { transform: scale(2.2) rotate(180deg); opacity: 1; }
    70% { transform: scale(1.5) rotate(360deg); opacity: 0.9; }
    100% { transform: scale(0.2) rotate(720deg) translateY(-350px); opacity: 0; }
  }
  
  @keyframes rainbowBurst {
    0% { transform: scale(0) rotate(0deg); opacity: 0.9; }
    25% { transform: scale(2) rotate(120deg); opacity: 0.9; }
    60% { transform: scale(3) rotate(300deg); opacity: 0.5; }
    100% { transform: scale(5) rotate(720deg); opacity: 0; }
  }
  
  @keyframes magicCircle {
    0% { transform: scale(0) rotate(0deg); opacity: 0.8; }
    30% { transform: scale(1.5) rotate(180deg); opacity: 0.8; }
    70% { transform: scale(2.5) rotate(540deg); opacity: 0.4; }
    100% { transform: scale(4) rotate(1080deg); opacity: 0; }
  }
  
  @keyframes plasmaOrb {
    0% { transform: scale(0); opacity: 0.7; }
    40% { transform: scale(1.8); opacity: 0.8; }
    80% { transform: scale(2.5); opacity: 0.3; }
    100% { transform: scale(4); opacity: 0; }
  }
  
  @keyframes energyWave {
    0% { transform: scale(0) rotate(0deg); opacity: 0.6; }
    50% { transform: scale(2) rotate(180deg); opacity: 0.4; }
    100% { transform: scale(4) rotate(360deg); opacity: 0; }
  }
  
  @keyframes phoenixFeather {
    0% { transform: scale(0) rotate(0deg) translateY(0); opacity: 1; }
    30% { transform: scale(1.5) rotate(120deg) translateY(-50px); opacity: 0.9; }
    70% { transform: scale(1.2) rotate(300deg) translateY(-150px); opacity: 0.6; }
    100% { transform: scale(0.3) rotate(720deg) translateY(-400px); opacity: 0; }
  }
  
  @keyframes cosmicDust {
    0% { transform: scale(0) translateY(0); opacity: 1; }
    40% { transform: scale(1.5) translateY(-100px); opacity: 0.8; }
    100% { transform: scale(0.5) translateY(-300px); opacity: 0; }
  }
  
  @keyframes finalToastGlow {
    0% { 
      box-shadow:0 0 40px rgba(124,58,237,.6), 0 0 80px rgba(236,72,153,.4), 0 0 120px rgba(255,255,255,.2);
      transform:translateX(-50%) scale(1);
    }
    100% { 
      box-shadow:0 0 60px rgba(124,58,237,.8), 0 0 120px rgba(236,72,153,.6), 0 0 180px rgba(255,255,255,.3);
      transform:translateX(-50%) scale(1.02);
    }
  }
  
  /* CSS Character Animations - Super Fancy */
  .bg-anim {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, #1a1a1a, #2d2d2d, #404040);
    transition: all 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
    font-family: 'Noto Emoji', 'Apple Color Emoji', sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 120px;
    overflow: hidden;
  }
  
  .bg-anim::after {
    content: var(--char);
    position: absolute;
    font-size: 120px;
    opacity: 0.9;
    z-index: 1;
    animation: var(--char-animation) var(--char-duration) infinite;
  }
  
  @keyframes emojiRain {
    0% { 
      transform: translateY(-100px) rotate(0deg);
    }
    50% { 
      transform: translateY(0) rotate(180deg);
    }
    100% { 
      transform: translateY(100px) rotate(360deg);
    }
  }
  
  @keyframes emojiFloat {
    0%, 100% { 
      transform: translateY(0) scale(1) rotate(0deg);
    }
    50% { 
      transform: translateY(-20px) scale(1.1) rotate(10deg);
    }
  }
  
  @keyframes emojiSpin {
    0% { 
      transform: rotate(0deg) scale(1);
    }
    50% { 
      transform: rotate(180deg) scale(1.2);
    }
    100% { 
      transform: rotate(360deg) scale(1);
    }
  }
  
  @keyframes emojiPulse {
    0%, 100% { 
      transform: scale(1);
      filter: hue-rotate(0deg);
    }
    50% { 
      transform: scale(1.15);
      filter: hue-rotate(90deg);
    }
  }
  
  @keyframes emojiZoom {
    0%, 100% { 
      transform: scale(0.8) rotate(0deg);
    }
    50% { 
      transform: scale(1.3) rotate(180deg);
    }
  }
  
  @keyframes emojiWave {
    0% { 
      transform: translateX(-30px) skew(10deg);
    }
    25% { 
      transform: translateX(0) skew(0deg);
    }
    50% { 
      transform: translateX(30px) skew(-10deg);
    }
    75% { 
      transform: translateX(0) skew(0deg);
    }
    100% { 
      transform: translateX(-30px) skew(10deg);
    }
  }
  
  @keyframes emojiBounce {
    0%, 100% { 
      transform: translateY(0) rotate(0deg);
    }
    25% { 
      transform: translateY(-30px) rotate(90deg);
    }
    50% { 
      transform: translateY(0) rotate(180deg);
    }
    75% { 
      transform: translateY(-15px) rotate(270deg);
    }
  }

  /* Responsive design for different screen sizes */
  @media (max-height: 900px) {
    .phone {
      height: calc(100vh - 40px);
      max-height: 800px;
    }
  }

  @media (max-height: 800px) {
    .app {
      padding: 10px;
    }
    .phone {
      height: calc(100vh - 20px);
      max-height: 750px;
    }
  }

  @media (max-height: 700px) {
    .phone {
      height: calc(100vh - 20px);
      max-height: 650px;
      width: min(393px, calc(100vw - 40px));
    }
  }

  @media (max-width: 450px) {
    .app {
      padding: 5px;
    }
    .phone {
      width: calc(100vw - 10px);
      height: calc(100vh - 10px);
      max-width: 393px;
    }
  }
</style>
</head>
<body>

<div class="app">
  <div class="phone">
    <div class="phone-button-volume"></div>
    <div class="phone-button-power"></div>
    
    <!-- Status Bar Left -->
    <div class="status-left">
      <span id="currentTime">9:41</span>
      <span class="dnd-icon" id="dndIcon">üåô</span>
    </div>
    
    <div class="dynamic-island-status">
    </div>
    
    <!-- Status Bar Right -->
    <div class="status-right">
      <div class="signal-bars" id="signalBars">
        <div class="signal-bar"></div>
        <div class="signal-bar"></div>
        <div class="signal-bar"></div>
        <div class="signal-bar"></div>
      </div>
      <div class="battery-status">
        <span class="battery-percentage" id="batteryPercent">87%</span>
        <div class="battery-icon-status">
          <div class="battery-fill-status" id="batteryFill"></div>
        </div>
      </div>
    </div>
    
    <div class="video" id="video">
      <div class="bg-anim" id="bgAnim"></div>
    </div>

    <div class="header">
      <div class="brand">
        <div>üî• –í–∞–µ–±—Å</div>
        <div class="tag" id="levelTag">Lv.0 –ù–æ–≤–∏—á–æ–∫</div>
      </div>
    </div>

    <div class="navbar">
      <button class="btn" id="authBtn">üîì –í–æ–π—Ç–∏</button>
    </div>

    <div class="actions">
      <div class="circle-btn" id="profileBtn" title="–ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å">üë§</div>
      <div class="circle-btn" id="likeBtn" title="–õ–∞–π–∫">‚ù§Ô∏è</div>
      <div class="circle-btn" id="commentBtn" title="–ö–æ–º–º–µ–Ω—Ç">üí¨</div>
      <div class="circle-btn" id="followBtn" title="–ü–æ–¥–ø–∏—Å–∫–∞">‚ûï</div>
    </div>

    <div class="toast" id="toast">
      <div class="title" id="toastTitle"></div>
      <div class="hint" id="toastHint"></div>
      <div class="progress-wrap">
        <div class="progress-top">
          <div>–ü—Ä–æ–≥—Ä–µ—Å—Å</div>
          <div id="progressCount">0/6</div>
        </div>
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
      </div>
    </div>
    
    <!-- Telegram notification overlay -->
    <div class="telegram-notification" id="telegramNotification">
      <div class="notification-header">
        <div class="contact-info">
          <div class="avatar">üë®‚Äçüíº</div>
          <div class="contact-details">
            <div class="contact-name">–ë–æ—Å—Å</div>
            <div class="contact-status">–≤ —Å–µ—Ç–∏</div>
          </div>
        </div>
        <div class="notification-time" id="notificationTime"></div>
      </div>
      <div class="notification-message">–ß–¢–û –° –î–ê–£?</div>
    </div>
  </div>

  <div class="side">
    <button class="next-btn" id="nextVideo">
      <div class="text">
        <div class="title">–°–ª–µ–¥. –≤–∏–¥–µ–æ</div>
        <small>(0)</small>
      </div>
      <div class="icon">‚ñ∂Ô∏è</div>
    </button>
    
    <div class="panel">
      <strong class="panel-header" id="panelHeader">–®–∞–≥–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞</strong>
      <div class="rules" id="rules"></div>
      <hr style="border:none;border-top:1px solid rgba(255,255,255,.2);margin:8px 0;">
      <div id="stats"></div>
      <button class="btn" id="resetBtn" style="margin-top:8px;transition:all 0.2s ease;">–ü–æ –Ω–æ–≤–æ–π</button>
      <button class="easter-egg-btn" id="easterEggBtn"></button>
    </div>
  </div>
</div>

<script>
  // Environment variables
  const ENV = {
    SESSION_KEY: 'iphone_unlocked'
  };
  
  // Reset functionality
  let resetClickCount = 0;
  let resetClickTimer = null;
  
  function checkUnlockStatus() {
    // –ü—Ä–æ—Å—Ç–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    initializeOnboarding();
  }
  
  function initializeOnboarding() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
    updateTime();
    updateBattery();
    updateStats();
    updateRules();
  }
  
  function updateTime() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('ru-RU', { 
      hour: '2-digit', 
      minute: '2-digit',
      hour12: false 
    });
    
    document.getElementById('currentTime').textContent = timeString;
  }
  
  function updateBattery() {
    // –°–∏–º—É–ª–∏—Ä—É–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞—Ä—è–¥–∞ –±–∞—Ç–∞—Ä–µ–∏
    currentBattery = Math.max(20, Math.min(100, currentBattery + (Math.random() - 0.7) * 2));
    document.getElementById('batteryPercent').textContent = Math.round(currentBattery) + '%';
    
    const batteryFill = document.getElementById('batteryFill');
    batteryFill.style.width = currentBattery + '%';
    
    // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞—Ä—è–¥–∞
    if (currentBattery <= 20) {
      batteryFill.style.backgroundColor = '#ff453a';
    } else if (currentBattery <= 50) {
      batteryFill.style.backgroundColor = '#ff9500';
    } else {
      batteryFill.style.backgroundColor = '#34c759';
    }
  }
  
  // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  document.addEventListener('DOMContentLoaded', () => {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    checkUnlockStatus();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
    setInterval(updateTime, 1000);
    setInterval(updateBattery, 30000); // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞—Ç–∞—Ä–µ—é –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
  });
  
  let isAuth=false, profile=false, viewed=0, likes=0, comments=0, follows=0;
  const totalSteps=6, viewGoal=5;

  // Status bar data
  let currentBattery = 87;
  let dndMode = Math.random() > 0.5; // –†–∞–Ω–¥–æ–º–Ω—ã–π —Ä–µ–∂–∏–º "–ù–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å"
  
  function randomizeData() {
    // Random battery (60-95%)
    currentBattery = Math.floor(Math.random() * 36) + 60;
    
    // Random DND mode
    dndMode = Math.random() > 0.7; // 30% chance
    
    updateBattery();
    updateTime();
    
    // Update Do Not Disturb mode
    const dndIcon = document.getElementById('dndIcon');
    if (dndIcon) {
      dndIcon.style.display = dndMode ? 'inline' : 'none';
    }
    
    // Update signal bars
    const signalBars = document.querySelectorAll('.signal-bar');
    const signalStrength = Math.floor(Math.random() * 4) + 1;
    signalBars.forEach((bar, index) => {
      if (index < signalStrength) {
        bar.classList.remove('weak');
      } else {
        bar.classList.add('weak');
      }
    });
  }
  
  // Initialize and update
  randomizeData();
  setInterval(randomizeData, 30000); // Randomize data every 30 seconds

  // –°—É–ø–µ—Ä –∫—Ä—É—Ç—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å —ç–º–æ–¥–∑–∏ (–º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
  const backgrounds = [
    { name: 'emojiRain', duration: '8s', char: 'üåü' },
    { name: 'emojiFloat', duration: '6s', char: 'üöÄ' },
    { name: 'emojiSpin', duration: '10s', char: 'üéØ' },
    { name: 'emojiPulse', duration: '7s', char: 'üíé' },
    { name: 'emojiZoom', duration: '9s', char: 'üî•' },
    { name: 'emojiWave', duration: '4s', char: '‚ö°' },
    { name: 'emojiBounce', duration: '5s', char: 'üé®' },
    { name: 'emojiRain', duration: '12s', char: 'üåà' },
    { name: 'emojiFloat', duration: '8s', char: 'üé≠' },
    { name: 'emojiSpin', duration: '6s', char: 'üé™' },
    { name: 'emojiPulse', duration: '10s', char: 'üéä' },
    { name: 'emojiZoom', duration: '7s', char: '‚ú®' },
    { name: 'emojiWave', duration: '3s', char: 'üåä' },
    { name: 'emojiBounce', duration: '8s', char: 'üéµ' },
    { name: 'emojiRain', duration: '5s', char: 'ü¶Ñ' },
    { name: 'emojiFloat', duration: '11s', char: 'üç≠' },
    { name: 'emojiSpin', duration: '4s', char: 'üé∏' },
    { name: 'emojiPulse', duration: '9s', char: 'üèÜ' },
    { name: 'emojiZoom', duration: '6s', char: 'üåô' },
    { name: 'emojiWave', duration: '7s', char: '‚òÑÔ∏è' },
    { name: 'emojiBounce', duration: '10s', char: 'üéÜ' },
    { name: 'emojiRain', duration: '6s', char: 'üçÄ' },
    { name: 'emojiFloat', duration: '8s', char: 'üéà' },
    { name: 'emojiSpin', duration: '5s', char: 'üéÅ' },
    { name: 'emojiPulse', duration: '12s', char: 'üí´' }
  ];

  let lastToastAt=0;
  const levelTag=document.getElementById('levelTag');
  const nextBtn=document.getElementById('nextVideo');
  
  // –†–∞–Ω–¥–æ–º–∏–∑–∏—Ä—É–µ–º –ø–æ—Ä—è–¥–æ–∫ –∞–Ω–∏–º–∞—Ü–∏–π –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
  const shuffledBackgrounds = [...backgrounds].sort(() => Math.random() - 0.5);

  const copy = {
    start:        {t:"üöÄ –¢—ã –≤ –í–∞–µ–±—Å!",               h:"–ù–∞—á–Ω–∏ —Å–º–æ—Ç—Ä–µ—Ç—å ‚Äî –ª–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –ø–æ–¥ —Ç–µ–±—è"},
    viewsNeedAuth:{t:"üëÄ –ö–ª–∞—Å—Å–Ω—ã–π —Ä–∏—Ç–º!",            h:"–í–æ–π–¥–∏, —á—Ç–æ–±—ã –ª–µ–Ω—Ç–∞ –∑–∞–ø–æ–º–Ω–∏–ª–∞ —Ç–≤–æ–π –≤–∫—É—Å"},
    authed:       {t:"‚úÖ –¢–µ–ø–µ—Ä—å –º—ã –∑–Ω–∞–∫–æ–º—ã",         h:"–ó–∞–ø–æ–ª–Ω–∏ –ø—Ä–æ—Ñ–∏–ª—å ‚Äî —Å—Ç–∞–Ω–µ—à—å –∑–∞–º–µ—Ç–Ω–µ–µ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ"},
    profiled:     {t:"‚úèÔ∏è –û—Ç–ª–∏—á–Ω–æ!",                  h:"–°–º–æ—Ç—Ä–∏ –¥–∞–ª—å—à–µ ‚Äî –ª–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –≤—Å—ë —Ç–æ—á–Ω–µ–µ"},
    viewsDone:    {t:"üéØ –•–æ—Ä–æ—à–∏–π —Ç–µ–º–ø!",             h:"–ü–æ—Å—Ç–∞–≤—å –ª–∞–π–∫ ‚Äî –ª–µ–Ω—Ç–∞ –ø–æ–π–º—ë—Ç —Ç–≤–æ–π –≤–∫—É—Å"},
    like:         {t:"‚ù§Ô∏è –õ–µ–Ω—Ç–∞ —É–∂–µ —É—á–∏—Ç—Å—è",          h:"–û—Å—Ç–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π ‚Äî –¥–æ–±–∞–≤—å —ç–º–æ—Ü–∏–π"},
    comment:      {t:"üí¨ –¢—ã –≤ –¥–∏–∞–ª–æ–≥–µ",              h:"–ü–æ–¥–ø–∏—à–∏—Å—å ‚Äî —É–≤–∏–¥–∏—à—å –±–æ–ª—å—à–µ –ª—é–±–∏–º–æ–≥–æ"},
    final:        {t:"üéâ –õ–µ–Ω—Ç–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–≤–æ—è",      h:"–ü—Ä–æ–¥–æ–ª–∂–∞–π —Å–º–æ—Ç—Ä–µ—Ç—å –∏ –ª–∞–π–∫–∞—Ç—å ‚Äî –æ–Ω–∞ —Å—Ç–∞–Ω–µ—Ç –µ—â—ë —É–º–Ω–µ–µ"},
    needAuth:     {t:"üîì –ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è",               h:"–ß—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ—Ç —à–∞–≥"},
  };

  const stepsList=[
    {key:"view",label:"üëÄ –ü–æ—Å–º–æ—Ç—Ä–∏ 5 –≤–∏–¥–µ–æ"},
    {key:"auth",label:"üîì –ê–≤—Ç–æ—Ä–∏–∑—É–π—Å—è"},
    {key:"profile",label:"üë§ –ó–∞–ø–æ–ª–Ω–∏ –ø—Ä–æ—Ñ–∏–ª—å"},
    {key:"like",label:"‚ù§Ô∏è –ü–æ—Å—Ç–∞–≤—å –ª–∞–π–∫"},
    {key:"comment",label:"üí¨ –û—Å—Ç–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"},
    {key:"follow",label:"‚ûï –ü–æ–¥–ø–∏—à–∏—Å—å"},
  ];

  function stepsDone(){
    let d=0;
    if(viewed>=viewGoal)d++;
    if(isAuth)d++;
    if(profile)d++;
    if(likes>=1)d++;
    if(comments>=1)d++;
    if(follows>=1)d++;
    return d;
  }
  function levelLabel(){
    const map=["Lv.0 –ù–æ–≤–∏—á–æ–∫","Lv.1 –ó—Ä–∏—Ç–µ–ª—å","Lv.2 –í–æ–≤–ª–µ—á—ë–Ω","Lv.3 –°–æ–∞–≤—Ç–æ—Ä","Lv.4 –í –∫—Ä—É–≥–µ","Lv.5 –ù–∞ –≤–æ–ª–Ω–µ","Lv.6 –°–≤–æ–π —á–µ–ª–æ–≤–µ—á–µ–∫"];
    return map[stepsDone()]||map[0];
  }
  function updateProgress(){
    const done=stepsDone();
    document.getElementById('progressCount').textContent=`${done}/${totalSteps}`;
    document.getElementById('progressFill').style.width=(done/totalSteps*100)+"%";
    levelTag.textContent=levelLabel();
  }
  function updateRules(){
    document.getElementById('rules').innerHTML = stepsList.map(s=>{
      let done=false;
      if(s.key==="view" && viewed>=viewGoal)done=true;
      if(s.key==="auth" && isAuth)done=true;
      if(s.key==="profile" && profile)done=true;
      if(s.key==="like" && likes>=1)done=true;
      if(s.key==="comment" && comments>=1)done=true;
      if(s.key==="follow" && follows>=1)done=true;
      return `<span class="${done?'done':''}">${done?'‚úÖ':'‚Ä¢'} ${s.label}</span>`;
    }).join("<br>");
  }
  function updateStats(){
    document.getElementById('stats').innerHTML=
      `–ü—Ä–æ—Å–º–æ—Ç—Ä—ã: ${viewed}<br>Auth: ${isAuth}<br>–ü—Ä–æ—Ñ–∏–ª—å: ${profile}<br>–õ–∞–π–∫–∏: ${likes}<br>–ö–æ–º–º–µ–Ω—Ç—ã: ${comments}<br>–ü–æ–¥–ø–∏—Å–∫–∏: ${follows}`;
  }
  function changeBg(){ 
    const bgElement = document.getElementById('bgAnim');
    const currentBg = shuffledBackgrounds[viewed % shuffledBackgrounds.length];
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏—é —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–∏–º–≤–æ–ª–æ–≤ - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ!
    bgElement.style.setProperty('--char', `"${currentBg.char}"`);
    bgElement.style.setProperty('--char-animation', currentBg.name);
    bgElement.style.setProperty('--char-duration', currentBg.duration);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à–æ–π fade —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ (–±–µ–∑ –º–∏–≥–∞–Ω–∏—è —Ñ–æ–Ω–∞)
    bgElement.style.opacity = '0.9';
    setTimeout(() => {
      bgElement.style.opacity = '1';
    }, 100);
    
    console.log(`üé® –ê–Ω–∏–º–∞—Ü–∏—è: ${currentBg.name} (${currentBg.duration}) —Å —Å–∏–º–≤–æ–ª–æ–º ${currentBg.char}`);
  }

  function showToast(title, hint){
    const now=Date.now();
    if(now - lastToastAt < 250) return;
    lastToastAt=now;
    const el=document.getElementById('toast');
    document.getElementById('toastTitle').textContent=title;
    document.getElementById('toastHint').textContent=hint;
    updateProgress();
    
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–æ—Å—Ç–∞
    if(stepsDone() === totalSteps) {
      el.classList.add('final');
    } else {
      el.classList.remove('final');
    }
    
    el.classList.add('show');
    clearTimeout(showToast._t);
    showToast._t=setTimeout(()=>el.classList.remove('show'), 3000);
  }

  function confetti(){
    // –ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ - —Ç–æ–ª—å–∫–æ –∫—Ä–∞—Å–∏–≤–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ —Ç–æ—Å—Ç–∞!
    console.log('ÔøΩ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ!');
  }

  function showTelegramNotification() {
    const notification = document.getElementById('telegramNotification');
    const timeElement = document.getElementById('notificationTime');
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è
    const now = new Date();
    const timeString = now.toLocaleTimeString('ru-RU', { 
      hour: '2-digit', 
      minute: '2-digit' 
    });
    timeElement.textContent = timeString;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    notification.classList.add('show');
    
    // –í–∏–±—Ä–∞—Ü–∏—è –µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
    if (navigator.vibrate) {
      navigator.vibrate([200, 100, 200]);
    }
    
    // –£–±–∏—Ä–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
      notification.classList.remove('show');
    }, 4000);
    
    console.log('üì± Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç –ë–æ—Å—Å–∞ –ø–æ–∫–∞–∑–∞–Ω–æ!');
  }

  function nextCopy(){
    if(!isAuth && viewed<viewGoal) return copy.start;
    if(!isAuth && viewed>=viewGoal) return copy.viewsNeedAuth;
    if(isAuth && !profile) return copy.authed;
    if(isAuth && profile && viewed<viewGoal) return copy.profiled;
    if(isAuth && viewed>=viewGoal && likes<1) return copy.viewsDone;
    if(likes>=1 && comments<1) return copy.like;
    if(comments>=1 && follows<1) return copy.comment;
    if(follows>=1) return copy.final;
    return copy.start;
  }

  function doAction(type){
    if(type!=="view" && type!=="auth" && !isAuth){ showToast(copy.needAuth.t, copy.needAuth.h); return; }

    if(type==="view"){ viewed++; nextBtn.querySelector('small').textContent=`(${viewed})`; }
    if(type==="auth"){ 
      isAuth=true;
      const authBtn = document.getElementById('authBtn');
      authBtn.textContent = '‚úÖ –í—ã –≤–æ—à–ª–∏';
      authBtn.classList.add('success');
      authBtn.disabled = true;
    }
    if(type==="profile"){ profile=true; }
    if(type==="like"){ likes++; }
    if(type==="comment"){ comments++; }
    if(type==="follow"){ follows++; }

    changeBg(); updateRules(); updateStats();

    const c = nextCopy();
    showToast(c.t, c.h);

    if(stepsDone()===totalSteps){ confetti(); }
  }

  document.getElementById('nextVideo').onclick = ()=>doAction('view');
  document.getElementById('authBtn').onclick   = ()=>doAction('auth');
  document.getElementById('profileBtn').onclick= ()=>doAction('profile');
  document.getElementById('likeBtn').onclick   = ()=>doAction('like');
  document.getElementById('commentBtn').onclick= ()=>doAction('comment');
  document.getElementById('followBtn').onclick = ()=>doAction('follow');

  document.getElementById('resetBtn').onclick=()=>{
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω
    const isUnlocked = sessionStorage.getItem(ENV.SESSION_KEY) === 'true';
    
    if (isUnlocked) {
      // –ï—Å–ª–∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω - —Å—á–∏—Ç–∞–µ–º –∫–ª–∏–∫–∏ –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
      resetClickCount++;
      
      // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
      if (resetClickTimer) {
        clearTimeout(resetClickTimer);
      }
      
      // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã
      resetClickTimer = setTimeout(() => {
        resetClickCount = 0;
      }, 3000);
      
      // –ï—Å–ª–∏ 5 –∫–ª–∏–∫–æ–≤ - –±–ª–æ–∫–∏—Ä—É–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω
      if (resetClickCount >= 5) {
        sessionStorage.removeItem(ENV.SESSION_KEY);
        lockPhone();
        resetClickCount = 0;
        showToast('üîí –¢–µ–ª–µ—Ñ–æ–Ω –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω', '–ù–∞–∂–∞—Ç–æ 5 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥');
        return;
      }
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤
      const remaining = 5 - resetClickCount;
      showToast(`üîÑ –°–±—Ä–æ—Å (${resetClickCount}/5)`, `–ï—â—ë ${remaining} –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏`);
    }
    
    // –û–±—ã—á–Ω—ã–π —Å–±—Ä–æ—Å
    isAuth=false; profile=false; viewed=0; likes=0; comments=0; follows=0;
    nextBtn.querySelector('small').textContent='(0)';
    
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞
    const authBtn = document.getElementById('authBtn');
    authBtn.textContent = 'üîì –í–æ–π—Ç–∏';
    authBtn.classList.remove('success');
    authBtn.disabled = false;
    
    // –†–∞–Ω–¥–æ–º–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–∞ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ
    randomizeData();
    
    // –ï—Å–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –±—ã–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω - –æ—Å—Ç–∞—ë—Ç—Å—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
    if (!isUnlocked) {
      sessionStorage.removeItem(ENV.SESSION_KEY);
      lockPhone();
    }
    
    changeBg(); updateRules(); updateStats(); updateProgress();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º toast —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
    if (resetClickCount < 5) {
      const c=nextCopy(); 
      if (isUnlocked) {
        // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—ã—á–Ω—ã–π toast –ø—Ä–∏ –ø–æ–¥—Å—á—ë—Ç–µ –∫–ª–∏–∫–æ–≤
      } else {
        showToast(c.t, c.h);
      }
    }
  };

  // Easter Egg - Telegram notification (—Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫)
  document.getElementById('panelHeader').onclick = () => {
    showTelegramNotification();
  };

  // –°—Ç–∞—Ä–∞—è –Ω–µ–≤–∏–¥–∏–º–∞—è –∫–Ω–æ–ø–∫–∞ —Ç–æ–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
  document.getElementById('easterEggBtn').onclick = () => {
    showTelegramNotification();
  };

  // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–∞
  function updateStatusBar() {
    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è
    const now = new Date();
    const timeString = now.toLocaleTimeString('ru-RU', { 
      hour: '2-digit', 
      minute: '2-digit' 
    });
    document.getElementById('currentTime').textContent = timeString;
    
    // –†–∞–Ω–¥–æ–º–Ω–∞—è –∑–∞—Ä—è–¥–∫–∞ (–æ—Ç 15% –¥–æ 100%)
    const batteryLevel = Math.floor(Math.random() * 85) + 15;
    document.getElementById('batteryPercent').textContent = batteryLevel + '%';
  }

  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å-–±–∞—Ä –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
  updateStatusBar();
  setInterval(updateStatusBar, 60000);

  changeBg(); updateRules(); updateStats(); updateProgress();
  const c0=nextCopy(); showToast(c0.t,c0.h);
</script>

</body>
</html>
